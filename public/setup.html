<!DOCTYPE html>
<html>
<head>
  <title>Setup Grid Widget</title>
</head>
<body>

<h2>Setup your Grid Widget</h2>

<label>
  Workspace name:
  <input id="name" placeholder="My Content Planner" />
</label>

<br><br>

<button id="connect">Connect Notion</button>

<script>
  function slugify(text) {
    return text
      .toLowerCase()
      .trim()
      .replace(/[^a-z0-9]+/g, "-");
  }

  document.getElementById("connect").onclick = () => {
    const name = document.getElementById("name").value;

    if (!name) {
      alert("Please enter a name");
      return;
    }

    const slug = slugify(name);

    // redirect to Notion OAuth
    window.location.href = `/api/auth?slug=${slug}`;
  };
</script>

</body>
</html>
